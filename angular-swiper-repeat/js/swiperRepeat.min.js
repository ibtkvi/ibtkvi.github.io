/*! https://github.com/ibtkvi/swiper-repeat */
!function(a,b,c,d){"use strict";var e=function(){return{applyChanges:function(a){if(a.hasOwnProperty("collection")&&this.updateCollection(a.collection),!this.isDragging())if(a.hasOwnProperty("selected")){var b=a.selected,c=this.getSlidePosition(a.selected);Math.abs(c)>0||0===c&&this.isInTransition()?this.transition(c,function(){this.select(b)}):null===c?this.select(b):0===c&&a.hasOwnProperty("collection")&&!this.isInTransition()&&this.refresh()}else a.hasOwnProperty("collection")&&!this.isInTransition()&&this.refresh()}}},f=function(a){return{translateContainer:function(b,c){a.css(this.TRANSITION_PROP+"Duration",c).css(this.TRANSFORM_PROP,this.TRANSFORMS_3D?"translate3d("+b+", 0, 0)":"translate("+b+", 0)")},getContainerPosition:function(){var c=b.getComputedStyle(a[0],null);if(b.WebKitCSSMatrix){var d=new WebKitCSSMatrix("none"===c.webkitTransform?"":c.webkitTransform);return d.m41}var d=c[this.TRANSFORM_PROP].split(",");return+(d[12]||d[4])},getContainerWidth:function(){return a[0].getBoundingClientRect().width||a.prop("offsetWidth")}}},g=function(){function a(a){for(var b=0;b<a.length;b++)if(c.documentElement.style[a[b]]!==d)return a[b]}var e,f;return b.ontransitionend===d&&b.onwebkittransitionend!==d?(e="WebkitTransition",f="webkitTransitionEnd transitionend"):(e="transition",f="transitionend"),{TRANSITION_PROP:e,TRANSITIONEND_EVENT:f,TRANSFORM_PROP:a(["transform","webkitTransform","MozTransform","msTransform","OTransform"]),TRANSFORMS_3D:!!a(["perspective","webkitPerspective","MozPerspective","MsPerspective","OPerspective"])}},h=function(a){var b,c;return{select:function(a,b){this.render(this.resolve(a)),this.move(b||0)},refresh:function(a){this.render(this.resolve()),this.move(a||0)},move:function(a){this.translate(a,0)},transition:function(a,b){this.translate(a,250,b)},isInTransition:function(){return c},translate:function(d,e,f){e>0?(b=f,c=!0):(b=null,c=!1),this.translateSlides(d,e),a&&a(this.index,d,e)},onTransitionEnd:function(){c=!1,b&&b.call(this),b=null}}},i=function(a){var b=[];return{render:function(c){if(c){for(var d=b.length-1;d>=0;d--){var e=b[d];-1===this.collection.indexOf(e.item)&&(e.destroy(),b.splice(d,1))}for(var d=0;d<this.collection.length;d++){for(var e=null,f=this.collection[d],g=b.length-1;g>=0;g--)b[g].item===f&&(e=b[g]);e||(e=a(f),e.element.css({position:"absolute",width:"100%",height:"100%"}),b.push(e)),e.element.css(this.TRANSFORM_PROP,"translate("+100*d+"%, 0)")}}},translateSlides:function(a,b){this.translateContainer(100*(-a-this.index)+"%",b+"ms")},getSlidesPosition:function(){return-this.getContainerPosition()/this.getContainerWidth()-this.index},getSlidePosition:function(a){if(null===this.index)return null;var b=this.collection.indexOf(a);return-1===b?null:b-this.index}}},j=function(a){var b=[];return{render:function(){function c(c,d){for(var e,f=b.length-1;f>=0;f--)b[f].item===d&&(e=b[f]);e||(e=a(d),e.element.css({position:"absolute",width:"100%",height:"100%"}),b.push(e)),e.element.css(this.TRANSFORM_PROP,"translate("+100*c+"%, 0)")}for(var d=b.length-1;d>=0;d--)null===this.getSlidePosition(b[d].item)&&(b[d].destroy(),b.splice(d,1));this.slides.left&&c.call(this,-1,this.slides.left.item),this.slides.center&&c.call(this,0,this.slides.center.item),this.slides.right&&c.call(this,1,this.slides.right.item)},translateSlides:function(a,b){this.translateContainer(100*-a+"%",b+"ms")},getSlidePosition:function(a){return this.slides.left&&this.slides.left.item===a?-1:this.slides.center&&this.slides.center.item===a?0:this.slides.right&&this.slides.right.item===a?1:null},getSlidesPosition:function(){return-this.getContainerPosition()/this.getContainerWidth()}}},k=function(a){var b=null;return{slides:{left:null,center:null,right:null},collection:[],resolve:function(c){var d=!1;if(b){this.collection=[];for(var e=0,f=b.length;f>e;e++)this.collection[e]=b[e];b=null,d=!0}var g=this.slides,h=this.collection;if(arguments.length?g.center={item:c}:!g.center&&h.length&&(g.center={item:h[0]}),g.center&&-1===h.indexOf(g.center.item)&&(g.center=h.length?{item:h[0]}:null),g.center){var i=this.index=h.indexOf(g.center.item);g.left=i>0?{item:h[i-1]}:null,g.right=h.length>i+1?{item:h[i+1]}:null}else g.left=g.right=null,this.index=null;return g.center&&a&&a(g.center.item),d},updateCollection:function(a){b=a}}},l=function(){var a,b,c,e,f,g=!1;return{onTouchStart:function(h){if(a=0,g=!0,e=d,f=this.getContainerWidth(),this.isInTransition()){a=this.getSlidesPosition();var i;-.5>a?(i=this.slides.left.item,a+=1):a>.5?(i=this.slides.right.item,a-=1):i=this.slides.center.item,this.select(i,a),e=!1}var j=h.touches[0];b={x:j.pageX,y:j.pageY,time:h.timeStamp||+new Date},c={x:0,y:0}},onTouchMove:function(h){if(!(h.touches.length>1||h.scale&&1!==h.scale)){var i=h.touches[0];if(c={x:i.pageX-b.x,y:i.pageY-b.y},e===d&&(e=!!(Math.abs(c.y)>Math.abs(c.x))),e)return void(g=!1);var j=-c.x/f+a;j=j>1?1:-1>j?-1:j;var k=1;(0>j&&!this.slides.left||j>0&&!this.slides.right)&&(k=1/Math.sqrt(Math.abs(j*f))),this.move(j*k)}},onTouchEnd:function(d){if(e)return void(g=!1);var h,i,j=-c.x/f+a,k=Math.abs(j)>.5||(d.timeStamp||+new Date)-b.time<250&&Math.abs(c.x)>20;k&&0>j&&this.slides.left?(h=this.slides.left.item,i=-1>=j?null:-1):k&&j>0&&this.slides.right?(h=this.slides.right.item,i=j>=1?null:1):Math.abs(j)>0?(h=this.slides.center.item,i=0):(h=this.slides.center.item,i=null),null!==i?this.transition(i,function(){this.select(h)}):this.select(h),g=!1},isDragging:function(){return g}}};a.module("swiperRepeat",["ng"]).directive("swiperRepeat",["$parse",function(b){var c={preventDefault:!0,stopPropagation:!1,prerender:!1,retranslator:null};return{restrict:"A",transclude:"element",priority:1e3,terminal:!0,link:function(d,m,n,o,p){function q(a){var b=d.$new();b[B]=a;var c=p(b,function(a){F.append(a)});return E=!0,{element:c,item:a,destroy:function(){b.$destroy(),c.remove(),E=!0}}}function r(a){y&&y(d,a),E=!0}function s(a,b){E=!1,a.apply(D,b),E&&(d.$digest(),E=!1)}function t(a){return function(b){A.preventDefault&&b.preventDefault(),A.stopPropagation&&b.stopPropagation(),s(a,arguments)}}function u(){H||(d.$evalAsync(function(){D.applyChanges(G),H=!1,G={}}),H=!0)}var v=n.swiperRepeat||"",w=v.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)\s*$/),x=n.swiperRepeatSelected?n.swiperRepeatSelected:null,y=x?b(x).assign:null,z=n.swiperRepeatOptions?b(n.swiperRepeatOptions):null,A=a.copy(c);if(z&&a.extend(A,z(d)),!w)throw new Error("Expected expression in form of '_item_ in _collection_' but got "+v+".");var B=w[1],C=w[2],D={},E=!1,F=a.element('<div style="position:relative;width:100%;height:100%;"></div>');m.after(F),a.extend(D,g(),f(F),h(A.retranslator),k(r),l(),e(),A.prerender?i(q):j(q)),F.on("touchstart",t(D.onTouchStart)),F.on("touchmove",t(D.onTouchMove)),F.on("touchend",t(D.onTouchEnd)),F.on(D.TRANSITIONEND_EVENT,function(a){a.target===F[0]&&(a.stopPropagation(),s(D.onTransitionEnd,arguments))});var G={},H=!1;d.$watchCollection(C,function(a){G.collection=a,u()}),x&&d.$watch(x,function(a){G.selected=a,u()})}}}])}(angular,window,document);